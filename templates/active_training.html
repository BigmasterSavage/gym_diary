<form method="POST" action="{{ url_for('active_training', workout_id=workout.id) }}">
    <div class="left-column">
        <label>Добавить упражнение:</label>
        <select name="exercise_id" required>
            <option value="">Выберите упражнение</option>
            {% for ex in exercises %}
                <option value="{{ ex.id }}">{{ ex.name }}</option>
            {% endfor %}
        </select>
        <input type="number" name="sets_count" value="1" min="1" max="20" required>
        <button type="submit" name="action" value="add_exercise">Добавить</button>
    </div>

    {% for ex_id, sets in grouped_sets.items() %}
        <div class="exercise-set">
            <strong>{{ sets[0].name }}</strong>
            {% for set in sets %}
                <div>
                    Подход {{ loop.index }}:
                    Вес (кг): <input type="number" name="weight_{{ set.id }}" value="{{ set.weight_kg or '' }}">
                    Повторы: <input type="number" name="reps_{{ set.id }}" value="{{ set.reps or '' }}">
                </div>
            {% endfor %}
            <button type="submit" name="action" value="save_exercise_{{ ex_id }}">Сохранить упражнение</button>
            <button type="submit" name="action" value="remove_exercise_{{ ex_id }}">Удалить упражнение</button>
        </div>
    {% endfor %}

    <br>
    <button type="submit" name="action" value="finish">Завершить тренировку</button>
</form>
